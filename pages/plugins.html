<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../images/icons/web-plugins.png">
    <link rel="stylesheet" href="../css/nav.css">
    <title>插件更新</title>
    <style>
        /* 继承通用样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            padding-top: 70px;
            /* 导航栏高度补偿 */
            background-color: #f5f5f5;
        }

        /* 博客内容样式 */
        .blog-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .articles-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }

        .article-card {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .article-card:hover {
            transform: translateY(-5px);
        }

        .article-title {
            color: #333;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .article-meta {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .article-content {
            color: #444;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .article-tags {
            display: flex;
            gap: 0.5rem;
        }

        .tag {
            background: #4CAF50;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        /* 新增文章标题链接样式 */
        .article-title a {
            color: inherit;
            text-decoration: none;
            transition: color 0.3s;
        }

        .article-title a:hover {
            color: #4CAF50;
            text-decoration: underline;
        }

        /* 搜索框样式 */
        .search-container {
            margin-bottom: 2rem;
            grid-column: 1 / -1;
            /* 跨三列 */
        }

        .search-container input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .blog-container {
                padding: 1rem;
            }

            .articles-grid {
                grid-template-columns: 1fr;
            }

            .article-card {
                padding: 1.5rem;
            }

            .search-container {
                grid-column: 1;
            }
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <ul class="nav-links">
            <li><a href="../index.html">首页</a></li>
            <li><a href="servers.html">服务器列表</a></li>
            <li><a href="maps.html">地图列表</a></li>
            <li><a href="plugins.html">插件更新</a></li>
            <li><a href="bans.html">封禁列表</a></li>
            <li><a href="gallery.html">图片画廊</a></li>
            <li><a>插件答疑QQ群：暂无</a></li>
        </ul>
    </nav>

    <div class="blog-container">
        <!-- 搜索框 -->
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="搜索插件...">
        </div>

        <!-- 动态内容容器 -->
        <div class="articles-grid" id="articlesContainer"></div>
    </div>
    <script>
        const container = document.getElementById("articlesContainer");
        const searchInput = document.getElementById("searchInput");
        let articlesData = []; // 用于存储从JSON获取的文章数据

        // 初始化文章列表
        function initArticles(articles) {
            articlesData = articles; // 存储文章数据
            renderArticles(articles);
        }

        // 渲染文章列表
        function renderArticles(articlesToRender) {
            container.innerHTML = ''; // 清空容器
            articlesToRender.forEach(article => {
                const articleEl = document.createElement("div");
                articleEl.className = "article-card";
                articleEl.innerHTML = ` 
            <h2 class="article-title"> 
                <a href="sub/article.html?id=${article.id}&name=${article.url}" target="_blank">${article.title}</a> 
            </h2> 
            <div class="article-meta"> 
                <span>${article.date}</span> • 
                <span>作者：${article.author}</span> 
            </div> 
            <div class="article-tags"> 
                ${article.tags.map(tag => ` 
                    <span class="tag" style="background: ${getTagColor(article.type)};"> 
                        ${tag} 
                    </span> 
                `).join('')} 
            </div> 
        `;
                container.appendChild(articleEl);
            });
        }

        // 搜索功能
        function searchArticles() {
            const searchTerm = searchInput.value.toLowerCase();
            const filteredArticles = articlesData.filter(article =>
                article.title.toLowerCase().includes(searchTerm) ||
                article.tags.some(tag => tag.toLowerCase().includes(searchTerm))
            );
            renderArticles(filteredArticles);
        }

        // 监听搜索框输入事件
        searchInput.addEventListener("input", searchArticles);

        fetch("../data/plugins.json")
            .then(response => response.json())
            .then(articles => {
                initArticles(articles); // 初始化文章列表
            });

        function getTagColor(type) {
            const colors = {
                hotfix: "#f44336",
                feature: "#4CAF50",
                default: "#9E9E9E"
            };
            return colors[type] || colors.default;
        } 
    </script>
</body>

</html>